apiVersion: apps/v1
kind: Deployment
metadata:
  name: gateway-service
  namespace: apptremind
spec:
  replicas: 2
  selector:
    matchLabels:
      app: gateway-service
  template:
    metadata:
      labels:
        app: gateway-service
    spec:
      containers:
        - name: gateway-service
          image: your-registry/apptremind-gateway-service:dev
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080
          env:
            - name: SERVICE_NAME
              value: gateway-service
            - name: PORT
              value: "8080"
            - name: AUTH_URL
              value: http://auth-service.apptremind.svc.cluster.local:8081
            - name: BUSINESS_URL
              value: http://business-service.apptremind.svc.cluster.local:8082
            - name: BOOKING_URL
              value: http://booking-service.apptremind.svc.cluster.local:8083
            - name: BILLING_URL
              value: http://billing-service.apptremind.svc.cluster.local:8084
            - name: JWT_SECRET
              value: dev-secret
            - name: RATE_LIMIT_PER_MINUTE
              value: "60"
            - name: REDIS_ADDR
              value: your-redis:6379
            - name: OTEL_EXPORTER_OTLP_ENDPOINT
              value: your-otel-collector:4317
            - name: OTEL_SAMPLING_RATIO
              value: "1"
            - name: CORS_ALLOWED_ORIGINS
              value: https://your-frontend.example.com
            - name: CORS_ALLOWED_METHODS
              value: GET,POST,PUT,PATCH,DELETE,OPTIONS
            - name: CORS_ALLOWED_HEADERS
              value: Authorization,Content-Type,X-Request-Id,X-Idempotency-Key
            - name: CORS_ALLOW_CREDENTIALS
              value: "false"
            - name: CORS_MAX_AGE_SECONDS
              value: "600"
